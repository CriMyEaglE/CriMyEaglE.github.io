(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){!function(e){e.classList.add("popup_fade"),setTimeout((function(){e.classList.remove("popup_fade")}),500)}(e),setTimeout((function(){e.classList.add("popup_hidden")}),500)}function o(e){e.classList.remove("popup_hidden")}function r(e){e.target.classList.contains("popup")&&0===e.button&&t(e.target)}e.d({},{bn:()=>m,_u:()=>v,qt:()=>h,k3:()=>S,t0:()=>b,po:()=>y,SZ:()=>_,Zm:()=>f});const n=(e,t)=>{(e=>e.some((e=>!e.validity.valid)))(e)?(t.classList.add("edit-form__save-button_disabled"),t.disabled=!0):(t.classList.remove("edit-form__save-button_disabled"),t.disabled=!1)};function a(e,t){const o=document.querySelector("#card").content.querySelector(".card").cloneNode(!0),r=o.querySelector(".card__image");return o.querySelector(".card__title").textContent=e,r.setAttribute("alt",e),r.src=t,o}function c(e){v.prepend(e)}const i=document.querySelector(".profile__edit-button"),s=document.querySelectorAll(".popup"),u=document.querySelector("#addButton"),d=document.querySelectorAll(".popup__close-button"),l=document.querySelector(".profile__name"),p=document.querySelector(".profile__description"),m=document.querySelector("#addFormPopup"),f=m.querySelector("#title-input"),_=m.querySelector("#url-input"),v=document.querySelector(".cards"),h=document.querySelector("#editFormPopup"),y=h.querySelector("#name-input"),b=h.querySelector("#job-input"),S=document.querySelector("#fullscreenImagePopup");for(let e=0;e<d.length;e++)d[e].addEventListener("click",(()=>{t(d[e].parentElement.parentElement)}));fetch("https://nomoreparties.co/v1/wbc-cohort-1/users/me",{headers:{authorization:"f3738230-a228-4435-8289-a861e5a04082"}}).then((e=>e.json())).then((e=>{l.textContent=e.name,p.textContent=e.about})),i.addEventListener("click",(()=>{fetch("https://nomoreparties.co/v1/wbc-cohort-1/users/me",{headers:{authorization:"f3738230-a228-4435-8289-a861e5a04082"}}).then((e=>e.json())).then((e=>{y.value=e.name,b.value=e.about})),o(h)})),h.addEventListener("submit",(function(e){e.preventDefault();const o=y.value,r=b.value;fetch("https://nomoreparties.co/v1/wbc-cohort-1/users/me",{newName:o,newJob:r,method:"PATCH",headers:{authorization:"f3738230-a228-4435-8289-a861e5a04082","Content-Type":"application/json"},body:JSON.stringify({name:o,about:r})}),t(h)})),u.addEventListener("click",(()=>{f.value="",_.value="",o(m)})),m.addEventListener("submit",(function(e){e.preventDefault(),c(a(f.value,_.value)),t(m)})),fetch("https://nomoreparties.co/v1/wbc-cohort-1/cards",{headers:{authorization:"f3738230-a228-4435-8289-a861e5a04082"}}).then((e=>e.json())).then((e=>{for(let t=0;t<e.length;t++)c(a(e[t].name,e[t].link))})),v.addEventListener("click",(function(e){e.target.classList.contains("card__like-button")&&e.target.classList.toggle("card__like-button_active")})),v.addEventListener("click",(function(e){e.target.classList.contains("card__delete-button")&&e.target.parentNode.remove()})),v.addEventListener("click",(function(e){if(e.target.classList.contains("card__image")){const t=S.querySelector(".fullscreen__image"),r=S.querySelector(".fullscreen__title");t.src=e.target.parentNode.querySelector(".card__image").src,r.textContent=e.target.parentNode.querySelector(".card__title").textContent,o(S)}})),s.forEach((e=>{e.addEventListener("mousedown",r)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&s.forEach(t)})),Array.from(document.querySelectorAll(".edit-form")).forEach((e=>{e.addEventListener("submit",(e=>{e.preventDefault()})),(e=>{const t=Array.from(e.querySelectorAll(".edit-form__input-form")),o=e.querySelector(".edit-form__save-button");n(t,o),t.forEach((r=>{r.addEventListener("input",(()=>{((e,t)=>{t.validity.valid?((e,t)=>{const o=e.querySelector(`.${t.id}-error`);t.classList.remove("edit-form__input-form_type_error"),o.classList.remove("edit-form__input-error_active"),o.textContent=""})(e,t):((e,t,o)=>{const r=e.querySelector(`.${t.id}-error`);t.classList.add("edit-form__input-form_type_error"),r.textContent=o,r.classList.add("edit-form__input-error_active")})(e,t,t.validationMessage)})(e,r),n(t,o)}))}))})(e)})),fetch("https://nomoreparties.co/v1/wbc-cohort-1/users/me",{headers:{authorization:"f3738230-a228-4435-8289-a861e5a04082"}}).then((e=>e.json())).then((e=>{console.log(e)}))})();